---
title: 'Template Management'
description: 'Master template creation, customization, and management in VizAPI.ai'
---

## What Are Templates?

Templates in VizAPI.ai define what information you want to extract from your visual content. Think of them as smart forms that tell our AI exactly what to look for in your images, documents, or files.

### Template Components

Every template consists of:

#### Fields
The specific pieces of information you want to extract:
- **Name**: A unique identifier (e.g., "merchant", "total_amount")
- **Description**: Human-readable explanation of what to extract
- **Type**: Data type (string, number, date, boolean, array)
- **Required**: Whether this field must be present

#### Metadata
Template information and settings:
- **Name**: Template display name
- **Description**: What the template is used for
- **Category**: Document type (receipt, invoice, form, etc.)
- **Version**: Current template version number

#### Configuration
Processing settings and options:
- **Processing Mode**: How the AI should analyze the image
- **Confidence Thresholds**: Minimum confidence required
- **Output Format**: How results should be structured

## Template Library

### Pre-Built Templates

Our expert-crafted templates cover common use cases:

#### Receipt Templates
- **Basic Receipt**: Merchant, date, total, tax
- **Detailed Receipt**: Line items, categories, payment method
- **Gas Station Receipt**: Fuel type, gallons, price per gallon
- **Restaurant Receipt**: Items, quantities, tips, subtotal

#### Invoice Templates  
- **Standard Invoice**: Vendor, amount, due date, terms
- **Service Invoice**: Hours, rates, project details
- **Product Invoice**: Items, quantities, unit prices
- **Medical Invoice**: Procedures, insurance, patient info

#### Form Templates
- **Contact Form**: Name, email, phone, message
- **Application Form**: Personal details, qualifications
- **Survey Form**: Questions, ratings, comments
- **Registration Form**: Event details, participant info

#### ID Templates
- **Driver's License**: Name, address, DOB, license number
- **Passport**: Name, nationality, passport number
- **Business Card**: Name, title, company, contact info
- **Employee ID**: Name, department, ID number

### Using Pre-Built Templates

<Steps>
  <Step title="Browse the Library">
    Navigate to Templates in your dashboard to see all available templates organized by category.
  </Step>
  <Step title="Preview Template">
    Click on any template to see its field structure and sample extraction results.
  </Step>
  <Step title="Deploy Template">
    Click "Use Template" to add it to your extractions. You can customize it before saving.
  </Step>
  <Step title="Test & Refine">
    Upload sample images to test the template and adjust fields as needed.
  </Step>
</Steps>

## Creating Custom Templates

### Template Builder Interface

The visual template builder provides an intuitive way to create custom templates:

#### Field Definition Panel
- **Add Fields**: Click "+" to add new extraction fields
- **Field Properties**: Configure name, description, type, and requirements
- **Field Ordering**: Drag and drop to reorder fields
- **Field Validation**: Set validation rules and formats

#### Preview Panel
- **Sample Upload**: Upload test images to validate your template
- **Live Preview**: See extraction results as you build
- **Confidence Display**: View confidence scores for each field
- **Error Highlighting**: Identify issues with field definitions

#### Configuration Panel
- **Template Settings**: Name, description, and category
- **Processing Options**: AI model selection and parameters
- **Output Format**: JSON structure customization
- **Version Control**: Save versions and manage releases

### Step-by-Step Template Creation

<Steps>
  <Step title="Start Template Creation">
    Click "New Extraction" from your dashboard to launch the template builder.
  </Step>
  <Step title="Define Basic Information">
    ```json
    {
      "name": "Custom Invoice Extractor",
      "description": "Extract key information from company invoices",
      "category": "invoice"
    }
    ```
  </Step>
  <Step title="Add Extraction Fields">
    Define what information to extract:
    ```json
    {
      "fields": [
        {
          "name": "invoice_number",
          "description": "The invoice number or ID",
          "type": "string",
          "required": true
        },
        {
          "name": "vendor_name", 
          "description": "Company or vendor name",
          "type": "string",
          "required": true
        },
        {
          "name": "total_amount",
          "description": "Total amount due",
          "type": "number",
          "required": true
        },
        {
          "name": "due_date",
          "description": "Payment due date",
          "type": "date",
          "required": false
        }
      ]
    }
    ```
  </Step>
  <Step title="Test Your Template">
    Upload sample invoices to validate field extraction and adjust as needed.
  </Step>
  <Step title="Save and Deploy">
    Save your template to make it available as an API endpoint.
  </Step>
</Steps>

### Advanced Field Types

#### String Fields
Basic text extraction with optional formatting:
```json
{
  "name": "email",
  "type": "string",
  "format": "email",
  "validation": "^[\\w-\\.]+@([\\w-]+\\.)+[\\w-]{2,4}$"
}
```

#### Number Fields
Numeric data with precision control:
```json
{
  "name": "price",
  "type": "number",
  "decimal_places": 2,
  "minimum": 0,
  "maximum": 999999.99
}
```

#### Date Fields
Date extraction with format specification:
```json
{
  "name": "invoice_date",
  "type": "date",
  "formats": ["MM/DD/YYYY", "DD-MM-YYYY", "YYYY-MM-DD"],
  "output_format": "YYYY-MM-DD"
}
```

#### Array Fields
Extract multiple similar items:
```json
{
  "name": "line_items",
  "type": "array",
  "item_schema": {
    "description": "Individual line item",
    "quantity": "number",
    "price": "number",
    "total": "number"
  }
}
```

#### Boolean Fields
Yes/no or true/false extraction:
```json
{
  "name": "tax_included",
  "type": "boolean",
  "true_indicators": ["tax included", "inclusive", "inc tax"],
  "false_indicators": ["tax excluded", "exclusive", "ex tax"]
}
```

## Template Versioning

### Why Use Versioning?

Template versioning allows you to:
- **Test Changes Safely**: Modify templates without affecting production
- **Maintain Backward Compatibility**: Keep old integrations working
- **Track Evolution**: See how templates change over time
- **Rollback Issues**: Quickly revert problematic changes

### Version Management

#### Creating Versions
<Steps>
  <Step title="Edit Existing Template">
    Make changes to field definitions, add new fields, or modify settings.
  </Step>
  <Step title="Save as New Version">
    Instead of overwriting, create a new version with your changes.
  </Step>
  <Step title="Test New Version">
    Validate the new version with test data before promoting to production.
  </Step>
  <Step title="Deploy Version">
    Set the new version as active for API endpoints.
  </Step>
</Steps>

#### Version States
- **Draft**: Work in progress, not available via API
- **Testing**: Available for testing but not production traffic
- **Active**: Current production version receiving API traffic
- **Archived**: Previous versions kept for reference

### Version Comparison

The version comparison tool helps you understand changes:

#### Side-by-Side View
- **Field Changes**: Added, removed, or modified fields
- **Configuration Diff**: Setting changes between versions
- **Performance Metrics**: Accuracy comparison between versions

#### Migration Planning
- **Breaking Changes**: Identify changes that affect API responses
- **Compatibility Notes**: Understand integration impacts
- **Rollback Procedures**: Plan for reverting if needed

## Template Performance Optimization

### Field Optimization

#### Description Quality
Better descriptions lead to better extraction:

❌ Poor: "Get the date"
✅ Good: "Extract the invoice date, typically found in the header"

❌ Poor: "Amount"  
✅ Good: "Total amount due including tax, usually at the bottom right"

#### Field Specificity
Be specific about what you're looking for:

```json
{
  "name": "vendor_phone",
  "description": "Vendor phone number, may include country code, found in header or footer",
  "type": "string",
  "format": "phone",
  "examples": ["(555) 123-4567", "+1-555-123-4567", "555.123.4567"]
}
```

#### Required vs Optional
Only mark fields as required if they're always present:
- **Required**: Fields that must be extracted for the template to be useful
- **Optional**: Fields that enhance the extraction but aren't critical

### Template Testing

#### Test Data Strategy
Use diverse test images to validate your template:
- **Variety**: Different formats, layouts, and qualities
- **Edge Cases**: Blurry images, unusual formatting
- **Real Data**: Actual documents from your use case
- **Volume**: Test with multiple examples

#### Performance Metrics
Monitor these key metrics:
- **Accuracy**: Percentage of correctly extracted fields
- **Confidence**: Average confidence scores
- **Processing Time**: How long extractions take
- **Error Rate**: Failed extractions percentage

## Template API Integration

### Template-Specific Endpoints

Each template automatically becomes an API endpoint:

```bash
# General extraction endpoint
POST https://api.vizapi.ai/v1/agents/extract-values

# Template-specific endpoint (coming soon)
POST https://api.vizapi.ai/v1/templates/{template-id}/extract
```

### Using Templates via API

<CodeGroup>

```javascript JavaScript
const response = await fetch('https://api.vizapi.ai/v1/agents/extract-values', {
  method: 'POST',
  headers: {
    'x-api-key': 'YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    template_id: 'your-template-id',
    image_url: 'https://example.com/invoice.pdf',
    version: 'latest' // or specific version number
  })
});

const result = await response.json();
```

```python Python
import requests

response = requests.post(
    'https://api.vizapi.ai/v1/agents/extract-values',
    headers={
        'x-api-key': 'YOUR_API_KEY',
        'Content-Type': 'application/json'
    },
    json={
        'template_id': 'your-template-id',
        'image_url': 'https://example.com/invoice.pdf',
        'version': 'latest'
    }
)

result = response.json()
```

</CodeGroup>

### Template Response Format

Template responses include structured data based on your field definitions:

```json
{
  "success": true,
  "template_id": "custom-invoice-extractor",
  "template_version": "2.1",
  "extracted_values": {
    "invoice_number": "INV-2024-001",
    "vendor_name": "ACME Services Inc.",
    "total_amount": 1250.99,
    "due_date": "2024-02-15",
    "line_items": [
      {
        "description": "Consulting Services",
        "quantity": 10,
        "rate": 125.00,
        "total": 1250.00
      }
    ]
  },
  "confidence_scores": {
    "invoice_number": 0.98,
    "vendor_name": 0.95,
    "total_amount": 0.99,
    "due_date": 0.92
  },
  "processing_time_ms": 1247,
  "credits_used": 3
}
```

## Advanced Template Features

### Conditional Fields

Extract fields based on document content:

```json
{
  "name": "tax_rate",
  "type": "number",
  "condition": {
    "field": "country",
    "equals": "US"
  },
  "description": "Tax rate, only for US invoices"
}
```

### Multi-Language Support

Templates can handle multiple languages:

```json
{
  "name": "total",
  "description": "Total amount",
  "language_hints": ["en", "es", "fr"],
  "keywords": {
    "en": ["total", "amount", "sum"],
    "es": ["total", "cantidad", "suma"],
    "fr": ["total", "montant", "somme"]
  }
}
```

### Template Analytics

Track template performance:

#### Usage Metrics
- **API Calls**: Total requests per template
- **Success Rate**: Percentage of successful extractions
- **Average Confidence**: Quality metrics
- **Processing Time**: Performance benchmarks

#### Field Analytics
- **Field Success Rates**: Which fields extract successfully
- **Confidence Distributions**: How confident the AI is
- **Common Failures**: Why extractions fail
- **Improvement Suggestions**: AI-powered optimization tips

## Troubleshooting Templates

### Common Issues

<AccordionGroup>
  <Accordion title="Low Confidence Scores">
    **Symptoms**: Extraction confidence below 80%
    
    **Solutions**:
    - Improve field descriptions with more detail
    - Add examples of expected values
    - Use higher quality sample images for testing
    - Adjust field types to match expected data
  </Accordion>

  <Accordion title="Missing Field Extractions">
    **Symptoms**: Some fields consistently return null
    
    **Solutions**:
    - Make fields optional if not always present
    - Improve descriptions to help AI locate information
    - Check if information is actually visible in images
    - Consider splitting complex fields into simpler ones
  </Accordion>

  <Accordion title="Incorrect Data Types">
    **Symptoms**: Numbers extracted as strings or dates as text
    
    **Solutions**:
    - Verify field type matches expected data
    - Add format specifications for dates and numbers
    - Include validation patterns for structured data
    - Test with diverse formatting examples
  </Accordion>

  <Accordion title="Template Version Conflicts">
    **Symptoms**: API responses differ from expected format
    
    **Solutions**:
    - Check which template version is active
    - Use specific version numbers in API calls
    - Review version history for breaking changes
    - Update integration code for new field formats
  </Accordion>
</AccordionGroup>

### Performance Optimization

#### Template Efficiency
- **Minimize Fields**: Only extract what you need
- **Optimize Descriptions**: Clear, concise field descriptions
- **Use Appropriate Types**: Match field types to data
- **Regular Testing**: Validate with real-world data

#### Scaling Considerations
- **Version Management**: Plan version rollouts carefully
- **Monitoring**: Track performance metrics continuously
- **Load Testing**: Validate templates with high volume
- **Backup Strategy**: Export important templates regularly

Templates are the foundation of successful data extraction with VizAPI.ai. Take time to optimize your templates for the best results, and don't hesitate to iterate based on real-world performance data. 